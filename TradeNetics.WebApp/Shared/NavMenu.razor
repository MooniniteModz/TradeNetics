<!-- GitHub-style Sidebar Navigation -->
<div class="github-nav-section">
    <h3 class="github-nav-title @(SidebarCollapsed ? "collapsed" : "")">Dashboard</h3>
    <ul class="github-nav-list">
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("") ? "active" : "")" href="" title="Overview">
                <i class="fe fe-home github-nav-icon"></i>
                <span class="nav-text">Overview</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("performance") ? "active" : "")" href="performance" title="Performance">
                <i class="fe fe-trending-up github-nav-icon"></i>
                <span class="nav-text">Performance</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("analytics") ? "active" : "")" href="analytics" title="Analytics">
                <i class="fe fe-bar-chart-2 github-nav-icon"></i>
                <span class="nav-text">Analytics</span>
            </a>
        </li>
    </ul>
</div>

<div class="github-nav-section">
    <h3 class="github-nav-title @(SidebarCollapsed ? "collapsed" : "")">Trading</h3>
    <ul class="github-nav-list">
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("trader") ? "active" : "")" href="trader" title="Live Trading">
                <i class="fe fe-activity github-nav-icon"></i>
                <span class="nav-text">Live Trading</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("bot-status") ? "active" : "")" href="bot-status" title="Bot Status">
                <i class="fe fe-cpu github-nav-icon"></i>
                <span class="nav-text">Bot Status</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("strategies") ? "active" : "")" href="strategies" title="Strategies">
                <i class="fe fe-layers github-nav-icon"></i>
                <span class="nav-text">Strategies</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("tradehistory") ? "active" : "")" href="tradehistory" title="Trade History">
                <i class="fe fe-clock github-nav-icon"></i>
                <span class="nav-text">Trade History</span>
            </a>
        </li>
    </ul>
</div>

<div class="github-nav-section">
    
    <h3 class="github-nav-title @(SidebarCollapsed ? "collapsed" : "")">Portfolio</h3>
    <ul class="github-nav-list">
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("portfolio") ? "active" : "")" href="portfolio" title="Holdings">
                <i class="fe fe-pie-chart github-nav-icon"></i>
                <span class="nav-text">Holdings</span>
            </a>
        </li>
        <li class="github-nav-item">5

            <a class="github-nav-item-link @(IsActive("portfolio-performance") ? "active" : "")" href="portfolio-performance" title="Performance">
                <i class="fe fe-trending-up github-nav-icon"></i>
                <span class="nav-text">Performance</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("risk-analysis") ? "active" : "")" href="risk-analysis" title="Risk Analysis">
                <i class="fe fe-shield github-nav-icon"></i>
                <span class="nav-text">Risk Analysis</span>
            </a>
        </li>
    </ul>
</div>

<div class="github-nav-section">
    <h3 class="github-nav-title @(SidebarCollapsed ? "collapsed" : "")">Market</h3>
    <ul class="github-nav-list">
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("crypto-overview") ? "active" : "")" href="crypto-overview" title="Market Overview">
                <i class="fe fe-globe github-nav-icon"></i>
                <span class="nav-text">Market Overview</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("technical-analysis") ? "active" : "")" href="technical-analysis" title="Technical Analysis">
                <i class="fe fe-target github-nav-icon"></i>
                <span class="nav-text">Technical Analysis</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("market-sentiment") ? "active" : "")" href="market-sentiment" title="Sentiment">
                <i class="fe fe-heart github-nav-icon"></i>
                <span class="nav-text">Sentiment</span>
            </a>
        </li>
    </ul>
</div>

<div class="github-nav-section">
    <h3 class="github-nav-title @(SidebarCollapsed ? "collapsed" : "")">Tools</h3>
    <ul class="github-nav-list">
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("backtester") ? "active" : "")" href="backtester" title="Backtester">
                <i class="fe fe-rewind github-nav-icon"></i>
                <span class="nav-text">Backtester</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("strategy-builder") ? "active" : "")" href="strategy-builder" title="Strategy Builder">
                <i class="fe fe-tool github-nav-icon"></i>
                <span class="nav-text">Strategy Builder</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("risk-calculator") ? "active" : "")" href="risk-calculator" title="Risk Calculator">
                <i class="fe fe-calculator github-nav-icon"></i>
                <span class="nav-text">Risk Calculator</span>
            </a>
        </li>
    </ul>
</div>

<div class="github-nav-section">
    <h3 class="github-nav-title @(SidebarCollapsed ? "collapsed" : "")">Settings</h3>
    <ul class="github-nav-list">
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("configuration") ? "active" : "")" href="configuration" title="Configuration">
                <i class="fe fe-settings github-nav-icon"></i>
                <span class="nav-text">Configuration</span>
            </a>
        </li>
        <li class="github-nav-item">
            <a class="github-nav-item-link @(IsActive("help") ? "active" : "")" href="help" title="Help & Support">
                <i class="fe fe-help-circle github-nav-icon"></i>
                <span class="nav-text">Help & Support</span>
            </a>
        </li>
    </ul>
</div>

@code {
    [Parameter] public bool SidebarCollapsed { get; set; }
    
    private string? currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
    }

    private bool IsActive(string href)
    {
        if (string.IsNullOrEmpty(href))
        {
            return string.IsNullOrEmpty(currentUrl) || currentUrl == "/";
        }
        return currentUrl?.Equals(href, StringComparison.OrdinalIgnoreCase) == true;
    }
}

@inject NavigationManager NavigationManager